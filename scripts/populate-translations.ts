// scripts/populate-translations.ts
import { createClient } from '@supabase/supabase-js';

// Initialize Supabase client
const supabaseUrl = process.env.VITE_SUPABASE_URL || 'https://zlbemopcgjohrnyyiwvs.supabase.co';
const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY || '';
const supabase = createClient(supabaseUrl, supabaseKey);

// Define all translation keys used in the application
const allTranslationKeys = [
  // From existing constants/translations.ts
  'jxCloud', 'dashboard', 'rooms', 'orders', 'menu', 'inventory', 'finance', 'financial_hub', 
  'users', 'settings', 'images', 'supply_chain', 'signOut', 'enMode', 'zhMode', 'filMode', 
  'enterprise_auth', 'collapse', 'expand', 'auth_title', 'auth_subtitle', 'auth_passkey_entry', 
  'auth_passkey_desc', 'auth_root_access', 'email_placeholder', 'auth_verify', 'rls_status', 
  'auth_failed', 'auth_passkey_error', 'auth_not_found', 'auth_not_allowed', 'auth_register_init', 
  'auth_register_desc', 'digital_driven', 'cloud_kitchen', 'auth_description', 'master_inject_btn', 
  'intel_node', 'registration_pending_title', 'registration_pending_message', 'registration_email_sent', 
  'back_to_login', 'auth_network_error', 'auth_registration_error', 'save', 'cancel', 'delete', 
  'edit', 'add', 'search', 'confirm', 'refresh', 'success', 'error', 'new_order_toast', 
  'sync_active', 'sync_offline',
  
  // Additional keys found in various components
  'sys_console', 'visual_tab', 'infra_tab', 'apply_settings', 'visual_theme', 'themeLight', 
  'themeDark', 'font_typography', 'hardware_link', 'autoPrint', 'supply_chain_mgmt', 
  'client_preview', 'rbac_title', 'accounts', 'partners', 'issue_account', 'root_authority', 
  'bind_biometric', 'identity_secured', 'activate_token_generated', 'activation_desc', 
  'copied', 'confirm', 'local_name', 'module_permissions', 'enable_e', 'create_c', 'update_u', 
  'delete_d', 'save_permissions', 'issue_certificate', 'staff_activate_error', 'staff_activate_title', 
  'staff_activate_subtitle', 'staff_activate_id', 'staff_activate_role', 'staff_activate_email', 
  'staff_activate_btn', 'staff_activate_desc', 'staff_activate_done', 'financial_console', 
  'financial_hub', 'revenue_flow', 'cashierShift', 'daily_revenue', 'cashIncome', 'digitalIncome', 
  'transactionLog', 'noData', 'shiftReport', 'endShift', 'errorOccurred', 'errorDescription', 
  'retryAction', 'reportIssue', 'stationManagement', 'generateAllQR', 'zone', 'ready', 'manualOrder', 
  'orderSummary', 'clear', 'emptyCart', 'totalBill', 'placeOrder', 'station', 'guestQRCode', 
  'displayQRDesc', 'staffOperatedDesc', 'printTicket', 'voidOrder', 'standardMode', 'kdsMode', 
  'viewAudit', 'acceptOrder', 'completeOrder', 'secureCloudActive', 'revenue', 'profit_estimate', 
  'pending_orders', 'avgOrderValue', 'trend_analysis', 'node_security', 'taxonomy_mgmt', 
  'add_l1_cat', 'deploy_arch', 'noData', 'all_assets', 'dish_archives', 'new_asset', 'inventory', 
  'edit_asset', 'new_asset_registry', 'overwrite_record', 'deploy_asset', 'permanently_delete', 
  'currency', 'preProductionAudit', 'productionReadiness', 'deploymentDesc', 'completed', 'pending', 
  'responseLatency', 'globalCdn', 'dataIntegrity', 'ddosMitigation', 'statusActive', 'sslTlsLabel', 
  'sslTlsDesc', 'jwtAuthLabel', 'jwtAuthDesc', 'corsPolicyLabel', 'corsPolicyDesc', 'envVarsLabel', 
  'envVarsDesc', 'dbProdLabel', 'dbProdDesc', 'redisCacheLabel', 'redisCacheDesc', 'dbBackupLabel', 
  'dbBackupDesc', 'paymentSdkLabel', 'paymentSdkDesc', 'cloudPrintLabel', 'cloudPrintDesc', 
  'infraSecurity', 'backendStorage', 'businessIntegration', 'cloud_gateway', 'visual_center', 
  'vault_info', 'syncing', 'upload_new', 'copy_url', 'preview', 'dimension_info', 'copy_link', 
  'admin_setup_title', 'admin_setup_subtitle', 'admin_setup_entity', 'admin_setup_welcome', 
  'admin_setup_btn', 'admin_setup_done', 'admin_setup_redirect', 'tax_info'
];

// Default translations for each language
const defaultTranslations: Record<string, Record<string, string>> = {
  zh: {
    // Add Chinese translations for missing keys
    sys_console: '系统控制台',
    visual_tab: '视觉',
    infra_tab: '基础设施',
    apply_settings: '应用设置',
    visual_theme: '视觉主题',
    themeLight: '明亮',
    themeDark: '暗黑',
    font_typography: '字体排版',
    hardware_link: '硬件链接',
    autoPrint: '自动打印',
    supply_chain_mgmt: '供应链管理',
    client_preview: '客户端预览',
    rbac_title: '权限控制',
    accounts: '账户',
    partners: '合伙人',
    issue_account: '发行账户',
    root_authority: '根权限',
    bind_biometric: '绑定生物识别',
    identity_secured: '身份已保护',
    activate_token_generated: '激活令牌已生成',
    activation_desc: '分享此链接给员工以激活账户',
    copied: '已复制',
    confirm: '确认',
    local_name: '本地名称',
    module_permissions: '模块权限',
    enable_e: '启用E',
    create_c: '创建C',
    update_u: '更新U',
    delete_d: '删除D',
    save_permissions: '保存权限',
    issue_certificate: '颁发证书',
    staff_activate_error: '员工激活错误',
    staff_activate_title: '员工激活',
    staff_activate_subtitle: '激活员工账户',
    staff_activate_id: '员工ID',
    staff_activate_role: '角色',
    staff_activate_email: '邮箱',
    staff_activate_btn: '激活账户',
    staff_activate_desc: '账户已准备就绪，点击下方按钮完成激活',
    staff_activate_done: '激活完成',
    financial_console: '财务控制台',
    revenue_flow: '收入流',
    cashierShift: '收银班次',
    daily_revenue: '日收入',
    cashIncome: '现金收入',
    digitalIncome: '数字收入',
    transactionLog: '交易日志',
    shiftReport: '班次报告',
    endShift: '结束班次',
    errorOccurred: '发生错误',
    errorDescription: '错误描述',
    retryAction: '重试操作',
    reportIssue: '报告问题',
    stationManagement: '站点管理',
    generateAllQR: '生成所有QR码',
    zone: '区域',
    ready: '就绪',
    manualOrder: '手动下单',
    orderSummary: '订单摘要',
    clear: '清除',
    emptyCart: '购物车为空',
    totalBill: '账单总额',
    placeOrder: '下单',
    voidOrder: '作废订单',
    standardMode: '标准模式',
    kdsMode: 'KDS模式',
    viewAudit: '查看审计',
    acceptOrder: '接受订单',
    completeOrder: '完成订单',
    secureCloudActive: '安全云激活',
    revenue: '收入',
    profit_estimate: '利润估算',
    pending_orders: '待处理订单',
    avgOrderValue: '平均订单价值',
    trend_analysis: '趋势分析',
    node_security: '节点安全',
    taxonomy_mgmt: '分类管理',
    add_l1_cat: '添加一级分类',
    deploy_arch: '部署架构',
    all_assets: '所有资产',
    dish_archives: '菜品档案',
    new_asset: '新建资产',
    inventory: '库存',
    edit_asset: '编辑资产',
    new_asset_registry: '新资产登记',
    overwrite_record: '覆盖记录',
    deploy_asset: '部署资产',
    permanently_delete: '永久删除',
    currency: '货币',
    preProductionAudit: '生产前审计',
    productionReadiness: '生产就绪',
    deploymentDesc: '部署描述',
    completed: '已完成',
    pending: '待处理',
    responseLatency: '响应延迟',
    globalCdn: '全球CDN',
    dataIntegrity: '数据完整性',
    ddosMitigation: 'DDoS缓解',
    statusActive: '状态活跃',
    sslTlsLabel: 'SSL/TLS',
    sslTlsDesc: 'SSL/TLS描述',
    jwtAuthLabel: 'JWT认证',
    jwtAuthDesc: 'JWT认证描述',
    corsPolicyLabel: 'CORS策略',
    corsPolicyDesc: 'CORS策略描述',
    envVarsLabel: '环境变量',
    envVarsDesc: '环境变量描述',
    dbProdLabel: '生产数据库',
    dbProdDesc: '生产数据库描述',
    redisCacheLabel: 'Redis缓存',
    redisCacheDesc: 'Redis缓存描述',
    dbBackupLabel: '数据库备份',
    dbBackupDesc: '数据库备份描述',
    paymentSdkLabel: '支付SDK',
    paymentSdkDesc: '支付SDK描述',
    cloudPrintLabel: '云打印',
    cloudPrintDesc: '云打印描述',
    infraSecurity: '基础设施安全',
    backendStorage: '后端存储',
    businessIntegration: '业务集成',
    cloud_gateway: '云网关',
    visual_center: '视觉中心',
    vault_info: '金库信息 ({name}): {count} 个项目',
    syncing: '同步中',
    upload_new: '上传新文件',
    copy_url: '复制URL',
    preview: '预览',
    dimension_info: '尺寸信息',
    copy_link: '复制链接',
    admin_setup_title: '管理员设置',
    admin_setup_subtitle: '设置管理员账户',
    admin_setup_entity: '管理实体',
    admin_setup_welcome: '欢迎使用管理员设置向导',
    admin_setup_btn: '初始化系统',
    admin_setup_done: '设置完成',
    admin_setup_redirect: '即将重定向到登录页面',
    tax_info: '税务信息'
  },
  en: {
    // Add English translations for missing keys
    sys_console: 'System Console',
    visual_tab: 'Visual',
    infra_tab: 'Infrastructure',
    apply_settings: 'Apply Settings',
    visual_theme: 'Visual Theme',
    themeLight: 'Light',
    themeDark: 'Dark',
    font_typography: 'Font Typography',
    hardware_link: 'Hardware Link',
    autoPrint: 'Auto Print',
    supply_chain_mgmt: 'Supply Chain Mgmt',
    client_preview: 'Client Preview',
    rbac_title: 'Role-Based Access Control',
    accounts: 'Accounts',
    partners: 'Partners',
    issue_account: 'Issue Account',
    root_authority: 'Root Authority',
    bind_biometric: 'Bind Biometric',
    identity_secured: 'Identity Secured',
    activate_token_generated: 'Activate Token Generated',
    activation_desc: 'Share this link with staff to activate account',
    copied: 'Copied',
    confirm: 'Confirm',
    local_name: 'Local Name',
    module_permissions: 'Module Permissions',
    enable_e: 'Enable E',
    create_c: 'Create C',
    update_u: 'Update U',
    delete_d: 'Delete D',
    save_permissions: 'Save Permissions',
    issue_certificate: 'Issue Certificate',
    staff_activate_error: 'Staff Activation Error',
    staff_activate_title: 'Staff Activation',
    staff_activate_subtitle: 'Activate staff account',
    staff_activate_id: 'Staff ID',
    staff_activate_role: 'Role',
    staff_activate_email: 'Email',
    staff_activate_btn: 'Activate Account',
    staff_activate_desc: 'Account ready, click below to complete activation',
    staff_activate_done: 'Activation Done',
    financial_console: 'Financial Console',
    revenue_flow: 'Revenue Flow',
    cashierShift: 'Cashier Shift',
    daily_revenue: 'Daily Revenue',
    cashIncome: 'Cash Income',
    digitalIncome: 'Digital Income',
    transactionLog: 'Transaction Log',
    shiftReport: 'Shift Report',
    endShift: 'End Shift',
    errorOccurred: 'Error Occurred',
    errorDescription: 'Error Description',
    retryAction: 'Retry Action',
    reportIssue: 'Report Issue',
    stationManagement: 'Station Management',
    generateAllQR: 'Generate All QR',
    zone: 'Zone',
    ready: 'Ready',
    manualOrder: 'Manual Order',
    orderSummary: 'Order Summary',
    clear: 'Clear',
    emptyCart: 'Empty Cart',
    totalBill: 'Total Bill',
    placeOrder: 'Place Order',
    voidOrder: 'Void Order',
    standardMode: 'Standard Mode',
    kdsMode: 'KDS Mode',
    viewAudit: 'View Audit',
    acceptOrder: 'Accept Order',
    completeOrder: 'Complete Order',
    secureCloudActive: 'Secure Cloud Active',
    revenue: 'Revenue',
    profit_estimate: 'Profit Estimate',
    pending_orders: 'Pending Orders',
    avgOrderValue: 'Avg Order Value',
    trend_analysis: 'Trend Analysis',
    node_security: 'Node Security',
    taxonomy_mgmt: 'Taxonomy Management',
    add_l1_cat: 'Add L1 Category',
    deploy_arch: 'Deploy Architecture',
    all_assets: 'All Assets',
    dish_archives: 'Dish Archives',
    new_asset: 'New Asset',
    inventory: 'Inventory',
    edit_asset: 'Edit Asset',
    new_asset_registry: 'New Asset Registry',
    overwrite_record: 'Overwrite Record',
    deploy_asset: 'Deploy Asset',
    permanently_delete: 'Permanently Delete',
    currency: 'Currency',
    preProductionAudit: 'Pre-Production Audit',
    productionReadiness: 'Production Readiness',
    deploymentDesc: 'Deployment Description',
    completed: 'Completed',
    pending: 'Pending',
    responseLatency: 'Response Latency',
    globalCdn: 'Global CDN',
    dataIntegrity: 'Data Integrity',
    ddosMitigation: 'DDoS Mitigation',
    statusActive: 'Status Active',
    sslTlsLabel: 'SSL/TLS',
    sslTlsDesc: 'SSL/TLS configuration',
    jwtAuthLabel: 'JWT Authentication',
    jwtAuthDesc: 'JWT authentication setup',
    corsPolicyLabel: 'CORS Policy',
    corsPolicyDesc: 'Cross-origin resource sharing policy',
    envVarsLabel: 'Environment Variables',
    envVarsDesc: 'Environment variables configuration',
    dbProdLabel: 'Production Database',
    dbProdDesc: 'Production database configuration',
    redisCacheLabel: 'Redis Cache',
    redisCacheDesc: 'Redis caching system',
    dbBackupLabel: 'Database Backup',
    dbBackupDesc: 'Database backup strategy',
    paymentSdkLabel: 'Payment SDK',
    paymentSdkDesc: 'Payment SDK integration',
    cloudPrintLabel: 'Cloud Print',
    cloudPrintDesc: 'Cloud printing service',
    infraSecurity: 'Infrastructure Security',
    backendStorage: 'Backend Storage',
    businessIntegration: 'Business Integration',
    cloud_gateway: 'Cloud Gateway',
    visual_center: 'Visual Center',
    vault_info: 'Vault ({name}): {count} items',
    syncing: 'Syncing',
    upload_new: 'Upload New',
    copy_url: 'Copy URL',
    preview: 'Preview',
    dimension_info: 'Dimension Info',
    copy_link: 'Copy Link',
    admin_setup_title: 'Admin Setup',
    admin_setup_subtitle: 'Setup admin account',
    admin_setup_entity: 'Admin Entity',
    admin_setup_welcome: 'Welcome to admin setup wizard',
    admin_setup_btn: 'Initialize System',
    admin_setup_done: 'Setup Complete',
    admin_setup_redirect: 'Redirecting to login page shortly',
    tax_info: 'Tax Information'
  },
  fil: {
    // Filipino translations for missing keys
    sys_console: 'Sistemang Console',
    visual_tab: 'Visual',
    infra_tab: 'Infrastructure',
    apply_settings: 'Ilapat ang Settings',
    visual_theme: 'Visual na Tema',
    themeLight: 'Maliwanag',
    themeDark: 'Madilim',
    font_typography: 'Font na Typography',
    hardware_link: 'Koneksyon sa Hardware',
    autoPrint: 'Awtomatikong Print',
    supply_chain_mgmt: 'Pamahalaan ng Supply Chain',
    client_preview: 'Preview ng Client',
    rbac_title: 'Paggawa ng Access batay sa Tungkulin',
    accounts: 'Mga Account',
    partners: 'Mga Kasosyo',
    issue_account: 'Mag-isyu ng Account',
    root_authority: 'Punong Awtoridad',
    bind_biometric: 'Ikabit ang Biometric',
    identity_secured: 'Naprotektahan ang Identidad',
    activate_token_generated: 'Nagawa na ang Token sa Pag-activate',
    activation_desc: 'Ibahagi ito sa empleyado para mag-activate ng account',
    copied: 'Kinopya',
    confirm: 'Kumpirmahin',
    local_name: 'Lokal na Pangalan',
    module_permissions: 'Mga Pahintulot ng Module',
    enable_e: 'Paganahin E',
    create_c: 'Gumawa C',
    update_u: 'I-update U',
    delete_d: 'Tanggalin D',
    save_permissions: 'I-save ang mga Pahintulot',
    issue_certificate: 'Mag-isyu ng Sertipiko',
    staff_activate_error: 'Error sa Pag-activate ng Staff',
    staff_activate_title: 'Pag-activate ng Staff',
    staff_activate_subtitle: 'I-activate ang account ng staff',
    staff_activate_id: 'ID ng Staff',
    staff_activate_role: 'Tungkulin',
    staff_activate_email: 'Email',
    staff_activate_btn: 'I-activate ang Account',
    staff_activate_desc: 'Nakahanda na ang account, i-click sa ibaba para tapusin ang pag-activate',
    staff_activate_done: 'Tapos na ang Pag-activate',
    financial_console: 'Financial na Console',
    revenue_flow: 'Daloy ng Kita',
    cashierShift: 'Shift ng Cashier',
    daily_revenue: 'Araw-araw na Kita',
    cashIncome: 'Kitang Cash',
    digitalIncome: 'Digital na Kita',
    transactionLog: 'Log ng Transaksyon',
    shiftReport: 'Ulat ng Shift',
    endShift: 'Tapusin ang Shift',
    errorOccurred: 'May Naganap na Error',
    errorDescription: 'Deskripsyon ng Error',
    retryAction: 'Subukan Muli ang Aksyon',
    reportIssue: 'I-report ang Isyu',
    stationManagement: 'Pamahalaan ng Station',
    generateAllQR: 'Gumawa ng Lahat na QR',
    zone: 'Sona',
    ready: 'Handa',
    manualOrder: 'Manual na Order',
    orderSummary: 'Buod ng Order',
    clear: 'Burahin',
    emptyCart: 'Walang Laman ang Cart',
    totalBill: 'Kabuuang Bill',
    placeOrder: 'Maglagay ng Order',
    voidOrder: 'Buwagin ang Order',
    standardMode: 'Standard na Mode',
    kdsMode: 'KDS Mode',
    viewAudit: 'Tignan ang Audit',
    acceptOrder: 'Tanggapin ang Order',
    completeOrder: 'Tapusin ang Order',
    secureCloudActive: 'Aktibo ang Secure Cloud',
    revenue: 'Kita',
    profit_estimate: 'Tantiyang Kita',
    pending_orders: 'Mga Nakabinbin na Order',
    avgOrderValue: 'Average na Halaga ng Order',
    trend_analysis: 'Pagsusuri sa Tendency',
    node_security: 'Seguridad ng Node',
    taxonomy_mgmt: 'Pamahalaan ng Taxonomy',
    add_l1_cat: 'Magdagdag ng L1 na Kategorya',
    deploy_arch: 'I-deploy ang Arkitektura',
    all_assets: 'Lahat ng Assets',
    dish_archives: 'Mga Archive ng Dish',
    new_asset: 'Bagong Asset',
    inventory: 'Imbentaryo',
    edit_asset: 'I-edit ang Asset',
    new_asset_registry: 'Bagong Rehistro ng Asset',
    overwrite_record: 'Patungan ang Rekord',
    deploy_asset: 'I-deploy ang Asset',
    permanently_delete: 'Permanenteng Tanggalin',
    currency: 'Pera',
    preProductionAudit: 'Audit bago ang Produksyon',
    productionReadiness: 'Kahandang Magawa',
    deploymentDesc: 'Deskripsyon ng Deployment',
    completed: 'Nakumpleto',
    pending: 'Nakabinbin',
    responseLatency: 'Latency ng Sagot',
    globalCdn: 'Global CDN',
    dataIntegrity: 'Integridad ng Datos',
    ddosMitigation: 'Paggamot sa DDoS',
    statusActive: 'Aktibong Estado',
    sslTlsLabel: 'SSL/TLS',
    sslTlsDesc: 'Konpigurasyon ng SSL/TLS',
    jwtAuthLabel: 'JWT Authentication',
    jwtAuthDesc: 'Pag-setup ng JWT authentication',
    corsPolicyLabel: 'Patakaran sa CORS',
    corsPolicyDesc: 'Patakaran sa cross-origin resource sharing',
    envVarsLabel: 'Mga Variable sa Kapaligiran',
    envVarsDesc: 'Konpigurasyon ng mga variable sa kapaligiran',
    dbProdLabel: 'Produksyon na Database',
    dbProdDesc: 'Konpigurasyon ng produksyon na database',
    redisCacheLabel: 'Redis Cache',
    redisCacheDesc: 'Sistemang Redis caching',
    dbBackupLabel: 'Backup ng Database',
    dbBackupDesc: 'Diskarte sa backup ng database',
    paymentSdkLabel: 'SDK ng Pagbayad',
    paymentSdkDesc: 'Pagsasama ng SDK ng pagbayad',
    cloudPrintLabel: 'Cloud Print',
    cloudPrintDesc: 'Serbisyo ng cloud printing',
    infraSecurity: 'Seguridad ng Imprastraktura',
    backendStorage: 'Imbentaryo sa Backend',
    businessIntegration: 'Pagsasama ng Negosyo',
    cloud_gateway: 'Cloud Gateway',
    visual_center: 'Sentro ng Visual',
    vault_info: 'Baul ({name}): {count} mga item',
    syncing: 'Ini-sync',
    upload_new: 'Mag-upload ng Bag-o',
    copy_url: 'Kopyahin ang URL',
    preview: 'Preview',
    dimension_info: 'Impormasyon ng Sukat',
    copy_link: 'Kopyahin ang Link',
    admin_setup_title: 'Setup ng Admin',
    admin_setup_subtitle: 'I-set up ang admin account',
    admin_setup_entity: 'Entidad ng Admin',
    admin_setup_welcome: 'Maligayang pagdating sa admin setup wizard',
    admin_setup_btn: 'Simulan ang Sistema',
    admin_setup_done: 'Tapos na ang Setup',
    admin_setup_redirect: 'I-redirect sa login page ag binilis',
    tax_info: 'Impormasyon sa Buwis'
  }
};

async function populateTranslations() {
  console.log('Starting to populate translations...');
  
  for (const key of allTranslationKeys) {
    for (const lang of ['zh', 'en', 'fil']) {
      const value = defaultTranslations[lang as keyof typeof defaultTranslations][key] || key;
      
      const { error } = await supabase
        .from('translations')
        .upsert({
          key,
          language: lang,
          value,
          namespace: 'common',
          is_active: true
        }, { onConflict: ['key', 'language'] });
      
      if (error) {
        console.error(`Error inserting ${key} for ${lang}:`, error);
      } else {
        console.log(`Inserted/updated ${key} for ${lang}`);
      }
    }
  }
  
  console.log('Translation population completed!');
}

// Run the function
populateTranslations().catch(console.error);